stateDiagram-v2
direction TB
[*] --> новый_заказ
новый_заказ --> оплачен : Взят в работу [оплата_картой]
новый_заказ --> сборка : Взят в работу [оплата_наличными]
сборка --> собран : Заказ полностью собран [сборщик закончил свою часть работы]
собран --> ждет_курьера : Уведомление о доставке передано курьеру
ждет_курьера --> передан_курьеру : Курьер доставляет заказ
передан_курьеру --> доставлен : Заказ доставлен
передан_курьеру --> оплачен: Оплата_наличными
новый_заказ --> отменен : По инициативе клиента
собран --> отменен : Не удалось списать оплату
сборка --> отменен : По инициативе клиента
ждет_курьера --> отменен : Курьер не найден  
передан_курьеру --> возврат: Клиент не принял заказ 
   оплачен --> [*]
   доставлен --> [*]
   отменен --> [*]
   возврат --> [*]
